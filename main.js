(()=>{"use strict";function t(i){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(i)}function i(i,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,(void 0,n=function(i,e){if("object"!==t(i)||null===i)return i;var r=i[Symbol.toPrimitive];if(void 0!==r){var o=r.call(i,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}(o.key),"symbol"===t(n)?n:String(n)),o)}var n}var e=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this._ctx=i,this._box=e,this.position=null}var e,r;return e=t,(r=[{key:"init",value:function(){this.position={x:Math.floor(15*Math.random())*this._box,y:Math.floor(15*Math.random())*this._box}}},{key:"render",value:function(){this._ctx.beginPath();var t=this.position.x+this._box/2,i=this.position.y+this._box/2,e=this._box/3,r=2*Math.PI;this._ctx.fillStyle="#dc475c",this._ctx.arc(t,i,e,0,r),this._ctx.fill()}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,n=function(t,i){if("object"!==r(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(n)?n:String(n)),o)}var n}var n=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this._ctx=i,this._map=e}var i,e;return i=t,(e=[{key:"render",value:function(){this._ctx.fillStyle="#2e3146",this._ctx.fillRect(0,0,this._map,this._map)}}])&&o(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==s(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var c=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this._ctx=i,this._box=e,this.body=[],this._createHead()}var i,e;return i=t,(e=[{key:"_createHead",value:function(){this.body[0]={x:7*this._box,y:7*this._box}}},{key:"render",value:function(){var t=this;this.body.forEach((function(i,e){t._ctx.beginPath(),t._ctx.strokeStyle=0===e?"#05925F":"#6ba490",t._ctx.fillStyle=0===e?"#05925F":"#6ba490",t._ctx.roundRect(i.x,i.y,t._box,t._box,8),t._ctx.stroke(),t._ctx.fill()}))}},{key:"moveTail",value:function(){this.body.pop()}},{key:"moveHead",value:function(t){this.body.unshift(t)}}])&&a(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==u(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var f=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this._box=i,this._dir=null,this._newDir=null,this._direction={r:"right",l:"left",u:"up",d:"down"},this.isPause=!1,document.addEventListener("keydown",this._eventHandler.bind(this))}var i,e;return i=t,(e=[{key:"_eventHandler",value:function(t){32===t.keyCode&&(this.isPause=!this.isPause),65===t.keyCode&&(this._newDir=this._direction.l),87===t.keyCode&&(this._newDir=this._direction.u),68===t.keyCode&&(this._newDir=this._direction.r),83===t.keyCode&&(this._newDir=this._direction.d)}},{key:"checkDir",value:function(){null===this._dir&&(this._dir=this._newDir),this._dir===this._direction.u&&this._newDir!==this._direction.d&&(this._dir=this._newDir),this._dir===this._direction.d&&this._newDir!==this._direction.u&&(this._dir=this._newDir),this._dir===this._direction.r&&this._newDir!==this._direction.l&&(this._dir=this._newDir),this._dir===this._direction.l&&this._newDir!==this._direction.r&&(this._dir=this._newDir)}},{key:"eatTail",value:function(t,i){var e=!1;return i.forEach((function(i){t.x===i.x&&t.y===i.y&&(e=!0)})),e}},{key:"move",value:function(t){var i=this._box;return this._dir===this._direction.d&&(t.y+=i),this._dir===this._direction.u&&(t.y-=i),this._dir===this._direction.l&&(t.x-=i),this._dir===this._direction.r&&(t.x+=i),t}},{key:"borderMode",value:function(t){if(t.x<1*this._box||t.x>13*this._box||t.y<1*this._box||t.y>13*this._box)return!0}},{key:"freeMode",value:function(t){return t.x<1*this._box&&this._dir===this._direction.l&&(t.x=15*this._box),t.x>13*this._box&&this._dir===this._direction.r&&(t.x=-1*this._box),t.y<1*this._box&&this._dir===this._direction.u&&(t.y=15*this._box),t.y>13*this._box&&this._dir===this._direction.d&&(t.y=-1*this._box),t}}])&&l(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function y(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==h(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}var b=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.scoreElement=document.querySelector(".js-score"),this.score=0,this._create()}var i,e;return i=t,(e=[{key:"_create",value:function(){this.scoreElement.textContent=this.score}},{key:"add",value:function(){this.score++,this._create()}}])&&y(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function d(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==v(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}var m=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.rads=document.getElementsByName("borders")}var i,e;return i=t,(e=[{key:"_checkBorders",value:function(){this.rads.forEach((function(t){t.checked&&console.log(t.value)}))}},{key:"_addEventListener",value:function(){var t=this;this.form.addEventListener("submit",(function(i){i.preventDefault(),t._checkBorders()}))}}])&&d(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function _(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==p(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}new(function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.querySelector(".js-canvas"),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.game=null,this.box=32,this.map=480,this.canvas.width=this.map,this.canvas.height=this.map,this.food=new e(this.ctx,this.box),this.ground=new n(this.ctx,this.map),this.snake=new c(this.ctx,this.box),this.logic=new f(this.box),this.score=new b(this.game),this.params=new m,this.food.init(),this._runGame())}var i,r;return i=t,(r=[{key:"_drawGame",value:function(){if(this.ctx.clearRect(0,0,this.map,this.map),this.ground.render(),this.food.render(),this.snake.render(),!this.logic.isPause){var t={x:this.snake.body[0].x,y:this.snake.body[0].y};t.x===this.food.position.x&&t.y===this.food.position.y?(this.score.add(),this.food.init()):this.snake.moveTail(),this.logic.checkDir(),t=this.logic.freeMode(t),t=this.logic.move(t),this.logic.eatTail(t,this.snake.body)&&this._stopGame(),this.snake.moveHead(t)}}},{key:"_stopGame",value:function(){clearInterval(this.game)}},{key:"_runGame",value:function(){this.game=setInterval(this._drawGame.bind(this),100)}}])&&_(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),t}())})();